(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65452577"],{"0d75":function(e,t,a){"use strict";var o=a("2071"),n=a.n(o);n.a},"0db2":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-data"},[a("div",{staticClass:"add-box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addAccount}},[e._v("新增账户")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"角色",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-select",{on:{change:function(a){return e.selectChange(t.row)}},model:{value:t.row.role,callback:function(a){e.$set(t.row,"role",a)},expression:"scope.row.role"}},e._l(e.options,(function(e){return a("el-option",{key:e.key,attrs:{label:e.role,value:e.role}})})),1):a("span",[e._v(e._s(t.row.role))])]}}])}),a("el-table-column",{attrs:{label:"账号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("el-input",{model:{value:t.row.username,callback:function(a){e.$set(t.row,"username",a)},expression:"scope.row.username"}}):a("span",[e._v(e._s(t.row.username))])]}}])}),a("el-table-column",{attrs:{label:"描述",width:"180",prop:"des"}}),a("el-table-column",{attrs:{label:"编辑",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return"admin"!=t.row.username?[t.row.edit?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleSave(t.$index,t.row)}}},[e._v("完成")]):a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]:void 0}}],null,!0)})],1),a("AddAccount",{attrs:{dialogVisible:e.dialogVisible,options:e.options},on:{closeDialog:e.closeDialog,update:e.getData}})],1)},n=[],i=(a("ac6a"),a("d225")),s=a("b0b4"),l=a("308d"),c=a("6bb5"),r=a("4e2b"),u=a("9ab4"),d=a("60a3"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-info"},[a("el-dialog",{attrs:{title:"新增账户",visible:e.dialogVisible,"close-on-click-modal":!1,"show-close":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"form-box",attrs:{rules:e.rules,model:e.account,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"请选择角色",prop:"role"}},[a("el-select",{attrs:{placeholder:"请选择角色"},on:{change:e.selectChange},model:{value:e.account.role,callback:function(t){e.$set(e.account,"role",t)},expression:"account.role"}},e._l(e.options,(function(e){return a("el-option",{key:e.key,attrs:{label:e.role,value:e.role}})})),1)],1),a("el-form-item",{attrs:{label:"请输入账号",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.account.username,callback:function(t){e.$set(e.account,"username",t)},expression:"account.username"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.$emit("closeDialog")}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确认")])],1)],1)],1)},b=[],f=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.account={key:"",role:"",username:"",des:""},e.rules={username:[{required:!0,message:"请输入账号",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]},e}return Object(r["a"])(t,e),Object(s["a"])(t,[{key:"selectChange",value:function(e){var t=this;this.options.map((function(a){a.role==e&&(t.account.key=a.key,t.account.des=a.des)}))}},{key:"handleAdd",value:function(){var e=this;this.$refs["ruleForm"].validate((function(t){t&&e.$axios.post("api/users/addUser",e.account).then((function(t){e.$emit("update"),e.$message({message:t.data.msg,type:"success"})})).catch((function(e){console.log(e)}))}))}}]),t}(d["e"]);Object(u["a"])([Object(d["c"])(Boolean)],f.prototype,"dialogVisible",void 0),Object(u["a"])([Object(d["c"])(Array)],f.prototype,"options",void 0),Object(u["a"])([Object(d["d"])()],f.prototype,"account",void 0),Object(u["a"])([Object(d["d"])()],f.prototype,"rules",void 0),Object(u["a"])([Object(d["b"])("closeDialog")],f.prototype,"handleAdd",null),f=Object(u["a"])([d["a"]],f);var h=f,m=h,g=(a("a02d"),a("2877")),v=Object(g["a"])(m,p,b,!1,null,"2dc43c80",null),y=v.exports,k=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.tableData=[],e.dialogVisible=!1,e.options=[{key:"admin",role:"管理员",des:"Super Administrator. Have access to view all pages."},{key:"editor",role:"客服",des:"Normal Editor. Can see all pages except permission page"},{key:"visitor",role:"游客",des:"Just a visitor. Can only see the home page and the document page"}],e}return Object(r["a"])(t,e),Object(s["a"])(t,[{key:"created",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;this.$axios("api/users/allUsers").then((function(t){t.data.datas.forEach((function(e){e.edit=!1})),e.tableData=t.data.datas})).catch((function(e){console.log(e)}))}},{key:"addAccount",value:function(){this.dialogVisible=!0}},{key:"closeDialog",value:function(){this.dialogVisible=!1}},{key:"selectChange",value:function(e){this.options.map((function(t){t.role==e.role&&(e.key=t.key,e.des=t.des)}))}},{key:"handleEdit",value:function(e,t){t.edit=!0}},{key:"handleSave",value:function(e,t){var a=this;t.edit=!1,this.$axios.post("api/users/editUser/".concat(t._id),t).then((function(e){a.$message({message:e.data.msg,type:"success"})})).catch((function(e){console.log(e)}))}},{key:"handleDelete",value:function(e,t){var a=this;this.$axios.delete("api/users/deleteUser/".concat(t._id)).then((function(t){a.$message({message:t.data.msg,type:"success"}),a.tableData.splice(e,1)})).catch((function(e){console.log(e)}))}}]),t}(d["e"]);Object(u["a"])([Object(d["d"])()],k.prototype,"tableData",void 0),Object(u["a"])([Object(d["d"])()],k.prototype,"dialogVisible",void 0),Object(u["a"])([Object(d["d"])()],k.prototype,"options",void 0),k=Object(u["a"])([Object(d["a"])({components:{AddAccount:y}})],k);var O=k,j=O,w=(a("0d75"),Object(g["a"])(j,o,n,!1,null,"8a914650",null));t["default"]=w.exports},2071:function(e,t,a){},"3f50":function(e,t,a){},a02d:function(e,t,a){"use strict";var o=a("3f50"),n=a.n(o);n.a},ac6a:function(e,t,a){for(var o=a("cadf"),n=a("0d58"),i=a("2aba"),s=a("7726"),l=a("32e9"),c=a("84f2"),r=a("2b4c"),u=r("iterator"),d=r("toStringTag"),p=c.Array,b={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=n(b),h=0;h<f.length;h++){var m,g=f[h],v=b[g],y=s[g],k=y&&y.prototype;if(k&&(k[u]||l(k,u,p),k[d]||l(k,d,g),c[g]=p,v))for(m in o)k[m]||i(k,m,o[m],!0)}}}]);
//# sourceMappingURL=chunk-65452577.e9f8af25.js.map